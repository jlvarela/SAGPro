<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/templates/#{navigationManagedBean.template}.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="menu">
        <div class="span2">
            
        </div>
    </ui:define> 

    <ui:define name="cuerpo">
        <script type="text/javascript" >
        //<![CDATA[
        function validarPasswords(){
            var input1 = $('#form\\:pass2');
            var input2 = $('#form\\:pass3');
            if ( input1.val() != input2.val() ){
                alert('Las contraseñas ingresadas deben coincidir');
                return false;
            }
            editarConfirm.show();
        }
        //]]>
        </script>
        <div class="span8">
            <fieldset style="padding: 20px">
                <legend>Editar Perfil</legend>
                <p:messages autoUpdate="true" closable="true" showDetail="true" showSummary="false" />
                <div class="row-fluid">
                    <div  class="span6">
                        <div class="watermark" style="margin-left: 5%">
                            <img src="#{request.contextPath}/resources/img/usuarios.png"  alt="alt imagen" ></img>
                        </div>
                    </div>
                    <div class="span5">
                        <h:form id="form">
                            <div class="row-fluid">
                                <div class="span5">
                                    RUT
                                </div>
                                <div class="span7">
                                    <div class="span9">
                                        <h:outputText id="rut" value="#{perfilUsuarioManagedBean.format_rut}"/>
                                    </div>
                                </div>
                            </div>

                            <div class="row-fluid">
                                <div class="span5">
                                    Nombre
                                </div>
                                <div class="span7">
                                    <h:inputText id="nombre" title="Ingrese solo letras" label="Nombre" value="#{perfilUsuarioManagedBean.my_user.nombre}">
                                        <f:validator validatorId="nombreValidator" />
                                    </h:inputText>
                                    <p:watermark for="nombre" value="Roberto"/>
                                </div>
                            </div>

                            <div class="row-fluid">
                                <div class="span5">
                                    Apellido
                                </div>
                                <div class="span7">
                                    <h:inputText id="apellido" title="Ingrese solo letras" label="Apellido" value="#{perfilUsuarioManagedBean.my_user.apellido}">
                                        <f:validator validatorId="nombreValidator" />
                                    </h:inputText>
                                    <p:watermark for="apellido" value="Jara"/>
                                </div>
                            </div>
                          
                            <div class="row-fluid">
                                <div class="span5">
                                    Correo
                                </div>
                                <div class="span7">
                                    <h:inputText  title="Ej: usuario@mail.com" id="correo" label="Correo" value="#{perfilUsuarioManagedBean.my_user.correo}">
                                        <f:validator validatorId="emailValidator" />
                                    </h:inputText>
                                    <p:watermark for="correo" value="Ej: usuario@mail.cl"/>
                                </div>
                            </div>
                            
                            <div class="row-fluid">
                                <div class="span5">
                                    Contraseña antigua
                                </div>
                                <div class="span7">
                                    <h:inputSecret  title="Contraseña antigua" id="pass1" value="#{perfilUsuarioManagedBean.password}" />
                                </div>
                            </div>
                            
                            <div class="row-fluid">
                                <div class="span5">
                                    Nueva contraseña
                                </div>
                                <div class="span7">
                                    <h:inputSecret title="Nueva contraseña" id="pass2" value="#{perfilUsuarioManagedBean.new_password}" />
                                </div>
                            </div>
                            
                            <div class="row-fluid">
                                <div class="span5">
                                    Repetir nueva contraseña
                                </div>
                                <div class="span7">
                                    <h:inputSecret  id="pass3" />
                                </div>
                            </div>
                            
                            <div class="row-fluid">
                                <div class="controls pull-right">
                                    <p:commandButton onclick="validarPasswords();" value="Editar" icon="ui-icon-pencil"/>
                                    <p:commandButton value="Cancelar" action="#{navigationManagedBean.goToMain()}" ajax="false" icon="ui-icon-closethick"/>
                                </div>
                            </div>
                            <p:confirmDialog  widgetVar="editarConfirm"  header="Editar Perfil" message="¿Desea guardar los cambios hechos?" style="position:absolute; left:35%; top: 35%" >  
                            <div class="controls pull-right">
                                <p:commandButton value="Aceptar" action="#{perfilUsuarioManagedBean.editarPerfil()}"  ajax="false" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                <p:commandButton value="Cancelar"  onclick="editarConfirm.hide();" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/> 
                            </div>
                            </p:confirmDialog>
                        </h:form>
                    </div>
                </div>
            </fieldset>
        </div>
    </ui:define>
</ui:composition>

