<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template ="/WEB-INF/templates/templateGerente.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:cc="http://java.sun.com/jsf/composite">

    <ui:define name="cuerpo">
        <div class="span9">
            <fieldset style="padding: 20px">
                <legend>Crear Objetivo</legend>
                <h:form>
                    <p:messages autoUpdate="true" closable="true" showDetail="true" showSummary="false" />
                <div class="row-fluid">
                    <div class="span6">
                        <div class="row-fluid">
                            <div class="span12">
                                1. Ingrese un nombre para el objetivo
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span3">
                                Nombre 
                            </div>
                            <div class="span8">
                                <h:inputText class="span12" value="#{crearObjetivoManagedBean.nombreObjetivo}" />
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                2. Seleccionar material y cantidad
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span3">
                                Material
                            </div>
                            <div class="span3">
                                <h:selectOneMenu value="#{crearObjetivoManagedBean.codMaterialSelected}" 
                                                 styleClass="span12" >
                                    <f:selectItems value="#{crearObjetivoManagedBean.listaMateriales}"
                                                   var="material"
                                                   itemLabel="#{material.nombreMaterial}"
                                                   itemValue="#{material.codMaterial}" />
                                </h:selectOneMenu>
                            </div>
                            <div class="span3">
                                <p:inputText styleClass="span11" 
                                             value="#{crearObjetivoManagedBean.cantMaterialSelected}"
                                             title="Cantidad"
                                             type="number">
                                    <f:attribute name="min" value="0" />
                                </p:inputText>
                            </div>
                            <div class="span3">
                                <p:commandButton action="#{crearObjetivoManagedBean.addMaterialObjetivo}"
                                                 icon="ui-icon-plus"
                                                 update="materialObjetivoTabla" />
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                <p:dataTable var="materialObjetivo"
                                             value="#{crearObjetivoManagedBean.selectedMateriales}"
                                             id="materialObjetivoTabla" 
                                             emptyMessage="No se han añadido materiales"
                                             style="margin-bottom: 10px;"
                                             >
                                    <p:column headerText="Material">
                                        <h:outputText value="#{materialObjetivo.nombreMaterial}" />
                                    </p:column>
                                    <p:column headerText="Cantidad">
                                        <h:outputText value="#{materialObjetivo.cantidad}" />
                                    </p:column>
                                    <p:column>
                                        <p:commandButton icon="ui-icon-close"
                                                         styleClass="btn"
                                                         title="Borrar"
                                                         actionListener="#{crearObjetivoManagedBean.removeMaterialObjetivo(materialObjetivo)}"
                                                         update="materialObjetivoTabla"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                3. Seleccionar fecha inicial para cumplir
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span3">
                                Fecha
                            </div>
                            <div class="span8">
                                <div class="input-append datetimepicker" style="width:100%">
<!--                                    <input  class="span11" data-format="yyyy-MM-dd" type="text"></input>-->
                                    <h:inputText styleClass="span11"
                                                 value="#{crearObjetivoManagedBean.initialDate}">
                                        <f:attribute name="data-format" value="yyyy-MM-dd" />
                                    </h:inputText>
                                    <span class="add-on">
                                        <i data-time-icon="icon-time" data-date-icon="icon-calendar">
                                        </i>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                4. Seleccionar fecha límite para cumplir
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span3">
                                Fecha
                            </div>
                            <div class="span8">
                                <div  class="input-append datetimepicker" style="width:100%">
                                    <h:inputText styleClass="span11" value="#{crearObjetivoManagedBean.finishDate}">
                                        <f:attribute name="data-format" value="yyyy-MM-dd" />
                                    </h:inputText>
                                    <span class="add-on">
                                        <i data-time-icon="icon-time" data-date-icon="icon-calendar">
                                        </i>
                                    </span>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="span6">
                        <div class="row-fluid">
                            <div class="span12">
                                5. Definir una prioridad
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span4">
                                Prioridad
                            </div>
                            <div class="span3">
                                <h:selectOneMenu styleClass="span12" value="#{crearObjetivoManagedBean.prioridadObjetivo}">
                                    <f:selectItem itemLabel="Baja" itemValue="0" />
                                    <f:selectItem itemLabel="Media" itemValue="1" />
                                    <f:selectItem itemLabel="Alta" itemValue="2" />
                                </h:selectOneMenu>
                            </div>
                        </div>

                        <div class="row-fluid">
                            <table class="table table-bordered">

                                <tbody>
                                    <tr>
                                        <td>Alta</td>
                                        <td>Objetivo Crítico. Su no realización puede implicar consecuencias negativas importantes.</td>
                                    </tr>
                                    <tr>
                                        <td>Media</td>
                                        <td>Objetivo Primario. Su no realización puede implicar consecuencias menores o a largo plazo.</td>
                                    </tr>
                                    <tr>
                                        <td>Baja</td>
                                        <td>Objetivo Secundario. Su no realización no implica consecuencias negativas.</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                6. Ingresar descripción del objetivo
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="span12">
                                <h:inputTextarea rows="6" style="width:97%" value="#{crearObjetivoManagedBean.descripcionObjetivo}" />
                            </div>
                        </div>

                        <div class="row-fluid">
                            <div class="control-group" >
                                <div class="controls pull-right">
                                    <p:commandButton ajax="false" styleClass="btn" value="Agregar" action="#{crearObjetivoManagedBean.agregarObjetivo()}"/>
                                    <p:commandButton type="reset" styleClass="btn" value="Cancelar" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </h:form>
            </fieldset>
        </div>


    </ui:define>

    <ui:define name="menu">
        <div class="span2"><!--Menú de la pagina-->
            <div class="accordion" >
                <div id="menuLateral" class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle" data-toggle="collapse" >Objetivos</a>

                        <div class="accordion-body collapse in">
                            <div class="accordion-inner nav nav-list">
                                <li class="active"><a>Crear Objetivo</a></li>
                                <li><a>Ver Objetivo</a></li>

                            </div>
                        </div>
                    </div>
                </div>
            </div>		
        </div>
    </ui:define>  

</ui:composition>

